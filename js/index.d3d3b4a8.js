(function(e){function t(t){for(var l,r,o=t[0],s=t[1],c=t[2],u=0,f=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&f.push(n[r][0]),n[r]=0;for(l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l]);d&&d(t);while(f.length)f.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],l=!0,o=1;o<a.length;o++){var s=a[o];0!==n[s]&&(l=!1)}l&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var l={},n={index:0},i=[];function r(t){if(l[t])return l[t].exports;var a=l[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=l,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)r.d(a,l,function(t){return e[t]}.bind(null,l));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=s;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"36a6":function(e,t,a){},"44cf":function(e,t,a){},"47d0":function(e,t,a){"use strict";a("44cf")},"4af5":function(e,t,a){"use strict";a("36a6")},"56d7":function(e,t,a){"use strict";a.r(t);var l=a("2b0e"),n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"userHeader"},[e._v("用户管理")]),t("manageUser"),t("updateUser")],1)},i=[],r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"manageUser"},[t("div",{staticClass:"handleDiv"},[t("div",{staticClass:"leftHand"},[t("el-button",{on:{click:e.handleNewUser}},[e._v("新建")]),t("el-input",{attrs:{placeholder:"按关键字搜索"},on:{input:e.searchKey},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t("div",{staticClass:"rightHand"},[t("el-button",{staticClass:"rbtn",on:{click:e.withdraw}},[e._v("撤销")])],1)]),t("TabList")],1)},o=[],s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tab"},[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.searchDataList(e.searchKey),"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55","show-header":"false"}}),t("el-table-column",{attrs:{prop:"name",label:"姓名",width:"80",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"age",label:"年龄","show-overflow-tooltip":"",width:"80",align:"center"}}),t("el-table-column",{attrs:{prop:"gender",label:"性别","show-overflow-tooltip":"",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s("male"==a.row.gender?"男":"女"))])]}}])}),t("el-table-column",{attrs:{prop:"tel",label:"联系电话","show-overflow-tooltip":"",width:"180",align:"center"}}),t("el-table-column",{attrs:{prop:"address",label:"详细地址","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.city+a.row.address))])]}}])}),t("el-table-column",{attrs:{label:"操作",width:"160px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleEdit(a.$index,a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleDelete(a.$index,a.row)}}},[e._v("删除")])]}}])})],1),t("div",{staticStyle:{"margin-top":"20px"}},[t("el-button",{on:{click:function(t){return e.handleSelectionDelete()}}},[e._v("批量删除")])],1)],1)},c=[],d=function(){var e=this,t=e._self._c;return t("div",{staticClass:"updateUser"},[t("el-drawer",{ref:"drawer",attrs:{title:e.my_title+"用户","before-close":e.handleClose,visible:e.dialog,direction:"ltr","custom-class":"demo-drawer"},on:{"update:visible":function(t){e.dialog=t}}},[t("div",{staticClass:"demo-drawer__content"},[t("el-form",{attrs:{model:e.form}},[t("div",{staticClass:"clear"},[t("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"性别","label-width":e.formLabelWidth}},[t("el-select",{model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[t("el-option",{attrs:{label:"男",value:"male"}}),t("el-option",{attrs:{label:"女",value:"fumale"}})],1)],1),t("el-form-item",{attrs:{label:"年龄","label-width":e.formLabelWidth}},[t("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1),t("el-form-item",{attrs:{label:"电话","label-width":e.formLabelWidth}},[t("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",t)},expression:"form.tel"}})],1)],1),t("div",{staticClass:"city_address"},[t("p",[e._v("详细地址")]),t("el-form-item",{attrs:{label:"","label-width":e.formLabelWidth}},[t("el-cascader",{attrs:{options:e.options,size:"middle",placeholder:"广东省广州市越秀"},on:{change:e.handleChange},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}}),t("el-input",{staticClass:"city_address_ex",attrs:{placeholder:"请输入详细地址",autocomplete:"off"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1)]),t("div",{staticClass:"demo-drawer__footer"},[t("el-button",{on:{click:e.cancelForm}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.$refs.drawer.closeDrawer()}}},[e._v(e._s(e.loading?"提交中 ...":"确 定"))])],1)],1)])],1)},u=[],f={name:"updateUser",props:{},data(){return{my_title:"新建",type:"add",table:!1,dialog:!1,loading:!1,Uid:100,form:{id:null,name:"",gender:"",age:null,tel:null,city:"",address:""},formLabelWidth:"80px",timer:null,options:[{value:"广东省",label:"广东省",children:[{value:"广州市",label:"广州市",children:[{value:"越秀区",label:"越秀区"},{value:"天河区",label:"天河区"},{value:"海珠区",label:"海珠区"},{value:"白云区",label:"白云区"}]},{value:"东莞市",label:"东莞市",children:[{value:"南城区",label:"南城区"},{value:"东城区",label:"东城区"},{value:"莞城区",label:"莞城区"},{value:"虎门区",label:"虎门区"}]}]}]}},computed:{},mounted(){this.$EventBus.$on("changeDialog",e=>{this.dialog=!0,"update"==e.type?(this.type="update",this.my_title="修改",this.form={...e.row},this.form.gender):(this.type="add",this.my_title="新建",this.form={})})},methods:{handleClose(e){this.loading||this.$confirm("确定要提交表单吗？").then(t=>{let a="";this.form.city.map(e=>{a+=e}),this.form.city=a,"update"!=this.type&&(this.form.id=this.Uid,this.Uid++),"男"==this.form.gender?this.form.gender="male":this.form.gender="fumale",this.$EventBus.$emit("UpdateUserInfo",this.form),this.loading=!0,this.timer=setTimeout(()=>{e(),setTimeout(()=>{this.loading=!1},30)},300)}).catch(e=>{alert("省区不能为空。")})},cancelForm(){this.loading=!1,this.dialog=!1,clearTimeout(this.timer)},handleChange(e){}}},h=f,m=(a("47d0"),a("2877")),p=Object(m["a"])(h,d,u,!1,null,"7a90c482",null),b=p.exports,v={name:"tabList",props:{list:Array},components:{updateUser:b},data(){return{searchKey:"",tableData:[{id:1,name:"王小虎",age:14,gender:"male",tel:"13452513214",city:"广东省广州市海珠区",address:"金沙江路32"},{id:2,name:"王小虎",age:142,gender:"female",tel:"13452513214",city:"广东省东莞市东城区",address:"天地第一字号"}],oldTableData:[],multipleSelection:[]}},mounted(){this.tableData.map((e,t)=>{this.$set(this.oldTableData,t,{...e})}),this.$EventBus.$on("UpdateUserInfo",e=>{this.tableData.map((e,t)=>{this.$set(this.oldTableData,t,{...e})});let t=this.tableData.findIndex(t=>t.id==e.id);-1!=t?this.$set(this.tableData,t,{...e}):this.tableData.push(e)}),this.$EventBus.$on("searchKey",e=>{this.searchKey=e}),this.$EventBus.$on("widthdraw",()=>{this.$confirm("确定撤回上一步吗？").then(e=>{this.tableData=this.oldTableData}).catch(e=>{console.log(e)})})},updated(){},computed:{},methods:{searchDataList(e){return this.tableData.filter(t=>{let a=t.name.includes(e)||t.city.includes(e)||t.address.includes(e);if(a){let e={id:t.id,name:t.name,gender:t.gender,address:t.city+t.address,age:t.age};return e}})},toggleSelection(e){e?e.forEach(e=>{this.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange(e){this.multipleSelection=e},handleSelectionDelete(){this.multipleSelection.map(e=>{this.tableData.map((t,a)=>{t.id==e.id&&this.handleDelete(a)})})},handleEdit(e,t){this.$EventBus.$emit("changeDialog",{type:"update",row:t})},handleDelete(e,t){this.tableData.splice(e,1)}}},g=v,w=(a("4af5"),Object(m["a"])(g,s,c,!1,null,"a96c9846",null)),y=w.exports,_={name:"manageUser",props:{},components:{TabList:y},data(){return{search:"",searchTimer:null}},methods:{handleNewUser(){this.$EventBus.$emit("changeDialog",{})},searchKey(e){clearTimeout(this.searchTimer),this.searchTimer=setTimeout(()=>{this.$EventBus.$emit("searchKey",e)},800)},withdraw(){this.$EventBus.$emit("widthdraw")}}},$=_,D=(a("f7ce"),Object(m["a"])($,r,o,!1,null,"073f9cc0",null)),x=D.exports,k={name:"App",components:{manageUser:x,updateUser:b}},S=k,T=(a("d19f"),Object(m["a"])(S,n,i,!1,null,null,null)),C=T.exports,U=a("5c96"),O=a.n(U);a("0fae");l["default"].config.productionTip=!1,l["default"].use(O.a),l["default"].prototype.$EventBus=new l["default"],new l["default"]({render:e=>e(C)}).$mount("#app")},b1f1:function(e,t,a){},bd6c:function(e,t,a){},d19f:function(e,t,a){"use strict";a("bd6c")},f7ce:function(e,t,a){"use strict";a("b1f1")}});
//# sourceMappingURL=index.d3d3b4a8.js.map